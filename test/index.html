<!DOCTYPE html PUBLIC "-//HbbTV//1.1.1//EN" "http://www.hbbtv.org/dtd/HbbTV-1.1.1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="content-type" content="application/vnd.hbbtv.xhtml+xml; charset=utf-8" />
  <title>Tracking Sampler Test</title>
  <script type="text/javascript">
    //<![CDATA[
    // disabling native apis for testing polyfills
    window.JSON = null;
    //]]>
  </script>
  <script type="text/javascript" src="http://localhost:4000/sampler.js"></script>
  <script type="text/javascript" src="http://localhost:4000/testing.js"></script>
</head>

<body
  style="width: 1280px; height: 720px; margin: 0; padding: 0; position: relative; overflow: hidden; font-family: 'Tiresias', sans-serif">
  <object id="video" type="video/broadcast" fullscreen="true" width="1280" height="720"
    style="position:absolute; top: 0px; left: 0px; width: 1280px; height: 720px;"></object>
  <div style="visibility: hidden; width: 0; height: 0; position: absolute;">
    <object id="oipfAppMngr" type="application/oipfApplicationManager"></object>
    <object id="oipfCfg" type="application/oipfConfiguration"></object>
  </div>

  <script type="text/javascript">
    //<![CDATA[
    window.__tvi_sampler.checkInSample(function (inSample) {
      window.__tvi_sampler.getPercentile(function (percentile) {
        if (!percentile) {
          console.warn('percentile not yet assigned', percentile);
          if (inSample) {
            console.info('in sample while TC evaluation not done');
          }
        } else {
          if (inSample) {
            console.info('percentile in desired range', percentile);
          } else {
            console.error('percentile not in desired range', percentile);
          }
        }
      });
    });
    //]]>
  </script>
</body>

</html>
